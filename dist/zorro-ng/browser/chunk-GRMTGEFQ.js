import{a as b}from"./chunk-MSGFT5JS.js";import{b as I}from"./chunk-6QFG5ZSD.js";import{Ba as o,Ca as f,Oa as h,Qa as x,Qb as g,Ta as t,Tb as E,Ua as e,aa as p,d as S,db as i,eb as l,mb as u}from"./chunk-TYC4EHML.js";var m=S(b());function v(d,r){if(d&1&&(t(0,"tr",6)(1,"td",7),i(2),e(),t(3,"td",7),i(4),e(),t(5,"td",7),i(6),e(),t(7,"td",7),i(8),e(),t(9,"td",7),i(10),e(),t(11,"td",7),i(12),e()()),d&2){let s=r.$implicit;o(2),l(s.id),o(2),l(s.usuario.nombre),o(2),l(s.usuario.apellido),o(2),l(s.carnet),o(2),l(s.fechaNacimiento),o(2),l(s.usuario.email)}}var F=(()=>{let r=class r{constructor(n){this.http=n,this.pacientes=[],this.filteredPacientes=[],this.citas=[],this.medicoId=parseInt(localStorage.getItem("userId")||"0",10)-1,console.log(this.medicoId)}ngOnInit(){this.loadCitas()}loadCitas(){this.http.get("http://143.198.147.110/api/citas").subscribe(n=>{this.citas=n.filter(a=>a.medicoId===this.medicoId&&a.estado==="atendida"),this.loadPacientes()},n=>{m.default.fire({title:"Error al cargar citas",text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error loading citas",n)})}loadPacientes(){this.http.get("http://143.198.147.110/api/pacientes").subscribe(n=>{let a=new Set(this.citas.map(c=>c.pacienteId));this.filteredPacientes=n.filter(c=>a.has(c.id))},n=>{m.default.fire({title:"Error al cargar pacientes",text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error loading pacientes",n)})}};r.\u0275fac=function(a){return new(a||r)(f(I))},r.\u0275cmp=p({type:r,selectors:[["app-gestionar-pacientes"]],standalone:!0,features:[u],decls:20,vars:1,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"min-w-full","bg-white","shadow-lg","rounded-lg"],[2,"background-color","#343a40","color","white"],[1,"py-3","px-4","font-semibold","text-left"],["class","border-b",4,"ngFor","ngForOf"],[1,"border-b"],[1,"py-2","px-4"]],template:function(a,c){a&1&&(t(0,"div",0)(1,"h1",1),i(2,"Pacientes Atendidos"),e(),t(3,"table",2)(4,"thead")(5,"tr",3)(6,"th",4),i(7,"ID"),e(),t(8,"th",4),i(9,"Nombre"),e(),t(10,"th",4),i(11,"Apellido"),e(),t(12,"th",4),i(13,"Carnet"),e(),t(14,"th",4),i(15,"Fecha de Nacimiento"),e(),t(16,"th",4),i(17,"Email"),e()()(),t(18,"tbody"),h(19,v,13,6,"tr",5),e()()()),a&2&&(o(19),x("ngForOf",c.filteredPacientes))},dependencies:[E,g]});let d=r;return d})();export{F as GestionarPacientesComponent};
