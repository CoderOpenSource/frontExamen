import{a as B}from"./chunk-4IA42FLE.js";import{a as O,b as N,e as W,h as P,i as L,k as j,m as V}from"./chunk-OGDTTBTQ.js";import{b as F}from"./chunk-6QFG5ZSD.js";import{Ba as r,Ca as y,Oa as x,Pb as S,Qa as c,Qb as I,Rb as T,Ta as t,Tb as k,Ua as i,Ya as A,Za as p,_a as m,aa as w,db as l,eb as f,fb as E,ib as C,ja as g,jb as M,ka as _,kb as b,mb as v,sa as D}from"./chunk-TYC4EHML.js";function J(s,d){if(s&1&&(t(0,"option",19),l(1),i()),s&2){let o=d.$implicit;c("ngValue",o.id),r(),f(o.nombre)}}function K(s,d){if(s&1&&(t(0,"div",20),l(1),i()),s&2){let o=m();c("ngClass",o.toastClass),r(),E(" ",o.toastMessage,`
`)}}var z=(()=>{let d=class d{constructor(e){this.http=e,this.aula={id:0,nombre:"",latitud:0,longitud:0,facultadId:null},this.facultades=[],this.isEditMode=!1,this.closeModal=new D,this.saveAula=new D,this.toastMessage=null,this.toastClass=""}ngOnInit(){}showToast(e,a){this.toastMessage=e,this.toastClass=a==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}onClose(){this.closeModal.emit()}onSave(){this.saveAula.emit(this.aula)}};d.\u0275fac=function(a){return new(a||d)(y(F))},d.\u0275cmp=w({type:d,selectors:[["app-aula-modal"]],inputs:{aula:"aula",facultades:"facultades",isEditMode:"isEditMode"},outputs:{closeModal:"closeModal",saveAula:"saveAula"},standalone:!0,features:[v],decls:30,vars:8,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","nombre",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el nombre",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","latitud",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese la latitud",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","longitud",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese la longitud",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","facultad",1,"block","text-gray-700","text-sm","font-bold","mb-2"],[1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],["class","fixed bottom-4 left-4 px-4 py-2 rounded shadow-lg",3,"ngClass",4,"ngIf"],[3,"ngValue"],[1,"fixed","bottom-4","left-4","px-4","py-2","rounded","shadow-lg",3,"ngClass"]],template:function(a,n){a&1&&(t(0,"div",0),p("click",function(){return n.onClose()}),t(1,"div",1),p("click",function(u){return u.stopPropagation()}),t(2,"h3",2),l(3),i(),t(4,"div",3)(5,"div",4)(6,"label",5),l(7,"Nombre"),i(),t(8,"input",6),b("ngModelChange",function(u){return M(n.aula.nombre,u)||(n.aula.nombre=u),u}),i()(),t(9,"div",4)(10,"label",7),l(11,"Latitud"),i(),t(12,"input",8),b("ngModelChange",function(u){return M(n.aula.latitud,u)||(n.aula.latitud=u),u}),i()(),t(13,"div",4)(14,"label",9),l(15,"Longitud"),i(),t(16,"input",10),b("ngModelChange",function(u){return M(n.aula.longitud,u)||(n.aula.longitud=u),u}),i()(),t(17,"div",4)(18,"label",11),l(19,"Facultad"),i(),t(20,"select",12),b("ngModelChange",function(u){return M(n.aula.facultadId,u)||(n.aula.facultadId=u),u}),t(21,"option",13),l(22,"Seleccione una facultad"),i(),x(23,J,2,2,"option",14),i()()(),t(24,"div",15)(25,"button",16),p("click",function(){return n.onSave()}),l(26,"Guardar"),i(),t(27,"button",17),p("click",function(){return n.onClose()}),l(28,"Cerrar"),i()()()(),x(29,K,2,2,"div",18)),a&2&&(r(3),f(n.isEditMode?"Editar Aula":"A\xF1adir Aula"),r(5),C("ngModel",n.aula.nombre),r(4),C("ngModel",n.aula.latitud),r(4),C("ngModel",n.aula.longitud),r(4),C("ngModel",n.aula.facultadId),r(),c("ngValue",null),r(2),c("ngForOf",n.facultades),r(6),c("ngIf",n.toastMessage))},dependencies:[k,S,I,T,V,L,j,O,P,N,W]});let s=d;return s})();function Q(s,d){if(s&1){let o=A();t(0,"tr")(1,"td",3),l(2),i(),t(3,"td",3),l(4),i(),t(5,"td",3),l(6),i(),t(7,"td",3),l(8),i(),t(9,"td",3),l(10),i(),t(11,"td",3)(12,"button",10),p("click",function(){let a=g(o).$implicit,n=m();return _(n.editAula(a.id))}),l(13,"Editar"),i(),t(14,"button",11),p("click",function(){let a=g(o).$implicit,n=m();return _(n.confirmDelete(a.id))}),l(15,"Eliminar"),i()()()}if(s&2){let o=d.$implicit,e=m();r(2),f(o.id),r(2),f(o.nombre),r(2),f(o.latitud),r(2),f(o.longitud),r(2),f(e.getFacultadNombre(o.facultadId))}}function R(s,d){if(s&1){let o=A();t(0,"app-aula-modal",12),p("closeModal",function(){g(o);let a=m();return _(a.handleCloseModal())})("saveAula",function(a){g(o);let n=m();return _(n.saveAula(a))}),i()}if(s&2){let o=m();c("aula",o.selectedAula)("facultades",o.facultades)("isEditMode",o.isEditMode)}}function U(s,d){if(s&1){let o=A();t(0,"app-confirm-modal",13),p("confirm",function(){g(o);let a=m();return _(a.deleteAula())})("cancel",function(){g(o);let a=m();return _(a.handleCloseConfirmModal())}),i()}}function X(s,d){if(s&1&&(t(0,"div",14),l(1),i()),s&2){let o=m();c("ngClass",o.toastClass),r(),E(" ",o.toastMessage,`
`)}}var de=(()=>{let d=class d{constructor(e){this.http=e,this.aulas=[],this.facultades=[],this.selectedAula={id:0,nombre:"",latitud:0,longitud:0,facultadId:null},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.aulaIdToDelete=null,this.toastMessage=null,this.toastClass=""}ngOnInit(){this.loadAulas(),this.loadFacultades()}loadAulas(){this.http.get("http://68.183.146.53/aulas/").subscribe(e=>{this.aulas=e},e=>{console.error("Error loading aulas",e)})}loadFacultades(){this.http.get("http://68.183.146.53/facultades/").subscribe(e=>{this.facultades=e},e=>{console.error("Error loading facultades",e)})}getFacultadNombre(e){let a=this.facultades.find(n=>n.id===e);return a?a.nombre:"Desconocida"}editAula(e){this.selectedAula=this.aulas.find(a=>a.id===e)||this.selectedAula,this.isEditMode=!0,this.showModal=!0}addAula(){this.selectedAula={id:0,nombre:"",latitud:0,longitud:0,facultadId:null},this.isEditMode=!1,this.showModal=!0}confirmDelete(e){this.aulaIdToDelete=e,this.showConfirmModal=!0}deleteAula(){this.aulaIdToDelete!==null&&this.http.delete(`http://68.183.146.53/aulas/${this.aulaIdToDelete}`).subscribe(()=>{this.showToast("Aula eliminada con \xE9xito","success"),this.loadAulas(),this.aulaIdToDelete=null,this.showConfirmModal=!1},e=>{this.showToast("Error al eliminar el aula","error"),console.error("Error deleting aula",e)})}cancelDelete(){this.aulaIdToDelete=null,this.showConfirmModal=!1}saveAula(e){this.isEditMode?this.http.put(`http://68.183.146.53/aulas/${e.id}`,e).subscribe(a=>{this.showToast("Aula actualizada con \xE9xito","success"),this.loadAulas()},a=>{this.showToast("Error al actualizar el aula","error"),console.error("Error updating aula",a)}):this.http.post("http://68.183.146.53/aulas/",e).subscribe(a=>{this.showToast("Aula creada con \xE9xito","success"),this.loadAulas()},a=>{this.showToast("Error al crear el aula","error"),console.error("Error creating aula",a)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(e,a){this.toastMessage=e,this.toastClass=a==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};d.\u0275fac=function(a){return new(a||d)(y(F))},d.\u0275cmp=w({type:d,selectors:[["app-aulas"]],standalone:!0,features:[v],decls:26,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"min-w-full","bg-white","text-center"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"flex","justify-start","mt-4"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md",3,"click"],[3,"aula","facultades","isEditMode","closeModal","saveAula",4,"ngIf"],[3,"confirm","cancel",4,"ngIf"],["class","toast",3,"ngClass",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveAula","aula","facultades","isEditMode"],[3,"confirm","cancel"],[1,"toast",3,"ngClass"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"h1",1),l(2,"Gestionar Aulas"),i(),t(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),l(7,"ID"),i(),t(8,"th",3),l(9,"Nombre"),i(),t(10,"th",3),l(11,"Latitud"),i(),t(12,"th",3),l(13,"Longitud"),i(),t(14,"th",3),l(15,"Facultad"),i(),t(16,"th",3),l(17,"Acciones"),i()()(),t(18,"tbody"),x(19,Q,16,5,"tr",4),i()(),t(20,"div",5)(21,"button",6),p("click",function(){return n.addAula()}),l(22,"A\xF1adir Aula"),i()()(),x(23,R,1,3,"app-aula-modal",7)(24,U,1,0,"app-confirm-modal",8)(25,X,2,2,"div",9)),a&2&&(r(19),c("ngForOf",n.aulas),r(4),c("ngIf",n.showModal),r(),c("ngIf",n.showConfirmModal),r(),c("ngIf",n.toastMessage))},dependencies:[k,S,I,T,V,z,B],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#011d3a;color:#fff}"]});let s=d;return s})();export{de as AulasComponent};
