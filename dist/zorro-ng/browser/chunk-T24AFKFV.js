import{a as W}from"./chunk-4IA42FLE.js";import{a as O,b as N,e as P,m as y}from"./chunk-OGDTTBTQ.js";import{b as F}from"./chunk-6QFG5ZSD.js";import{Ba as l,Ca as I,Oa as h,Qa as p,Qb as V,Rb as w,Sa as A,Ta as i,Tb as v,Ua as s,Ya as M,Za as c,_a as m,aa as x,db as r,eb as g,fb as C,ib as S,ja as u,jb as k,ka as _,kb as D,mb as b,sa as T}from"./chunk-TYC4EHML.js";function B(o,d){if(o&1&&(i(0,"div"),r(1),s()),o&2){let n=m();A("mt-4 p-2 rounded ",n.toastClass,""),l(),C(" ",n.toastMessage," ")}}var $=(()=>{let d=class d{constructor(){this.estadoAsistencia={id:0,nombre:""},this.isEditMode=!1,this.closeModal=new T,this.saveEstadoAsistencia=new T,this.toastMessage=null,this.toastClass=""}ngOnInit(){}showToast(t,e){this.toastMessage=t,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}onClose(){this.closeModal.emit()}onSave(){this.saveEstadoAsistencia.emit(this.estadoAsistencia)}};d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=x({type:d,selectors:[["app-estado-asistencia-modal"]],inputs:{estadoAsistencia:"estadoAsistencia",isEditMode:"isEditMode"},outputs:{closeModal:"closeModal",saveEstadoAsistencia:"saveEstadoAsistencia"},standalone:!0,features:[b],decls:15,vars:3,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","nombre",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el nombre del estado",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[3,"class",4,"ngIf"]],template:function(e,a){e&1&&(i(0,"div",0),c("click",function(){return a.onClose()}),i(1,"div",1),c("click",function(E){return E.stopPropagation()}),i(2,"h3",2),r(3),s(),i(4,"div",3)(5,"div",4)(6,"label",5),r(7,"Nombre"),s(),i(8,"input",6),D("ngModelChange",function(E){return k(a.estadoAsistencia.nombre,E)||(a.estadoAsistencia.nombre=E),E}),s()()(),i(9,"div",7)(10,"button",8),c("click",function(){return a.onSave()}),r(11,"Guardar"),s(),i(12,"button",9),c("click",function(){return a.onClose()}),r(13,"Cerrar"),s()(),h(14,B,2,4,"div",10),s()()),e&2&&(l(3),g(a.isEditMode?"Editar Estado de Asistencia":"A\xF1adir Estado de Asistencia"),l(5),S("ngModel",a.estadoAsistencia.nombre),l(6),p("ngIf",a.toastMessage))},dependencies:[v,w,y,O,N,P]});let o=d;return o})();function G(o,d){if(o&1){let n=M();i(0,"tr")(1,"td",3),r(2),s(),i(3,"td",3),r(4),s(),i(5,"td",3)(6,"button",9),c("click",function(){let e=u(n).$implicit,a=m();return _(a.editEstadoAsistencia(e.id))}),r(7,"Editar"),s(),i(8,"button",10),c("click",function(){let e=u(n).$implicit,a=m();return _(a.confirmDelete(e.id))}),r(9,"Eliminar"),s()()()}if(o&2){let n=d.$implicit;l(2),g(n.id),l(2),g(n.nombre)}}function q(o,d){if(o&1&&(i(0,"div"),r(1),s()),o&2){let n=m();A("mt-4 p-2 rounded ",n.toastClass,""),l(),C(" ",n.toastMessage," ")}}function H(o,d){if(o&1){let n=M();i(0,"app-estado-asistencia-modal",11),c("closeModal",function(){u(n);let e=m();return _(e.handleCloseModal())})("saveEstadoAsistencia",function(e){u(n);let a=m();return _(a.saveEstadoAsistencia(e))}),s()}if(o&2){let n=m();p("estadoAsistencia",n.selectedEstadoAsistencia)("isEditMode",n.isEditMode)}}function L(o,d){if(o&1){let n=M();i(0,"app-confirm-modal",12),c("confirm",function(){u(n);let e=m();return _(e.deleteEstadoAsistencia())})("cancel",function(){u(n);let e=m();return _(e.cancelDelete())}),s()}o&2&&p("message","\xBFEst\xE1 seguro que desea eliminar este estado de asistencia?")}var ne=(()=>{let d=class d{constructor(t){this.http=t,this.estadosAsistencia=[],this.selectedEstadoAsistencia={id:0,nombre:""},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.toastMessage=null,this.toastClass="",this.estadoAsistenciaIdToDelete=null}ngOnInit(){this.loadEstadosAsistencia()}loadEstadosAsistencia(){this.http.get("http://68.183.146.53/estadosasistencia/").subscribe(t=>{this.estadosAsistencia=t},t=>{console.error("Error loading estados asistencia",t)})}editEstadoAsistencia(t){this.selectedEstadoAsistencia=this.estadosAsistencia.find(e=>e.id===t)||this.selectedEstadoAsistencia,this.isEditMode=!0,this.showModal=!0}addEstadoAsistencia(){this.selectedEstadoAsistencia={id:0,nombre:""},this.isEditMode=!1,this.showModal=!0}confirmDelete(t){this.estadoAsistenciaIdToDelete=t,this.showConfirmModal=!0}deleteEstadoAsistencia(){this.estadoAsistenciaIdToDelete!==null&&this.http.delete(`http://68.183.146.53/estadosasistencia/${this.estadoAsistenciaIdToDelete}`).subscribe(()=>{this.showToast("Estado de Asistencia eliminado con \xE9xito","success"),this.loadEstadosAsistencia(),this.estadoAsistenciaIdToDelete=null,this.showConfirmModal=!1},t=>{this.showToast("Error al eliminar el Estado de Asistencia","error"),console.error("Error deleting estado asistencia",t)})}cancelDelete(){this.estadoAsistenciaIdToDelete=null,this.showConfirmModal=!1}saveEstadoAsistencia(t){this.isEditMode?this.http.put(`http://68.183.146.53/estadosasistencia/${t.id}`,t).subscribe(e=>{this.showToast("Estado de Asistencia actualizado con \xE9xito","success"),this.loadEstadosAsistencia()},e=>{this.showToast("Error al actualizar el Estado de Asistencia","error"),console.error("Error updating estado asistencia",e)}):this.http.post("http://68.183.146.53/estadosasistencia/",t).subscribe(e=>{this.showToast("Estado de Asistencia creado con \xE9xito","success"),this.loadEstadosAsistencia()},e=>{this.showToast("Error al crear el Estado de Asistencia","error"),console.error("Error creating estado asistencia",e)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(t,e){this.toastMessage=t,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};d.\u0275fac=function(e){return new(e||d)(I(F))},d.\u0275cmp=x({type:d,selectors:[["app-estado-asistencia"]],standalone:!0,features:[b],decls:19,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md","mt-4",3,"click"],[3,"class",4,"ngIf"],[3,"estadoAsistencia","isEditMode","closeModal","saveEstadoAsistencia",4,"ngIf"],[3,"message","confirm","cancel",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveEstadoAsistencia","estadoAsistencia","isEditMode"],[3,"confirm","cancel","message"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"h1",1),r(2,"Gestionar Estados de Asistencia"),s(),i(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),r(7,"ID"),s(),i(8,"th",3),r(9,"Nombre"),s(),i(10,"th",3),r(11,"Acciones"),s()()(),i(12,"tbody"),h(13,G,10,2,"tr",4),s()(),i(14,"button",5),c("click",function(){return a.addEstadoAsistencia()}),r(15,"A\xF1adir Estado de Asistencia"),s(),h(16,q,2,4,"div",6),s(),h(17,H,1,2,"app-estado-asistencia-modal",7)(18,L,1,1,"app-confirm-modal",8)),e&2&&(l(13),p("ngForOf",a.estadosAsistencia),l(3),p("ngIf",a.toastMessage),l(),p("ngIf",a.showModal),l(),p("ngIf",a.showConfirmModal))},dependencies:[v,V,w,y,$,W],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}"]});let o=d;return o})();export{ne as EstadoAsistenciaComponent};
