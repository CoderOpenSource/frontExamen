import{a as P}from"./chunk-MSGFT5JS.js";import{a as I,b as F,e as B,m as A}from"./chunk-OGDTTBTQ.js";import{b as V}from"./chunk-6QFG5ZSD.js";import{Ba as r,Ca as v,Oa as h,Qa as g,Qb as k,Rb as S,Ta as o,Tb as T,Ua as t,Ya as b,Za as x,_a as c,aa as M,d as O,db as d,eb as f,fb as E,ib as _,ja as p,jb as w,ka as m,kb as C,mb as y}from"./chunk-TYC4EHML.js";var u=O(P());function D(l,s){if(l&1){let a=b();o(0,"tr",9)(1,"td",10),d(2),t(),o(3,"td",10),d(4),t(),o(5,"td",10),d(6),t(),o(7,"td",10)(8,"button",11),x("click",function(){let e=p(a).$implicit,n=c();return m(n.editEspecialidad(e.id))}),d(9," Editar "),t(),o(10,"button",12),x("click",function(){let e=p(a).$implicit,n=c();return m(n.deleteEspecialidad(e.id))}),d(11," Eliminar "),t()()()}if(l&2){let a=s.$implicit;r(2),f(a.id),r(2),f(a.nombre),r(2),f(a.descripcion)}}function N(l,s){if(l&1){let a=b();o(0,"div",13)(1,"div",14)(2,"h2",15),d(3),t(),o(4,"div",16)(5,"label",17),d(6,"Nombre"),t(),o(7,"input",18),C("ngModelChange",function(e){p(a);let n=c();return w(n.selectedEspecialidad.nombre,e)||(n.selectedEspecialidad.nombre=e),m(e)}),t()(),o(8,"div",16)(9,"label",17),d(10,"Descripci\xF3n"),t(),o(11,"textarea",19),C("ngModelChange",function(e){p(a);let n=c();return w(n.selectedEspecialidad.descripcion,e)||(n.selectedEspecialidad.descripcion=e),m(e)}),t()(),o(12,"div",20)(13,"button",21),x("click",function(){p(a);let e=c();return m(e.saveEspecialidad())}),d(14),t(),o(15,"button",22),x("click",function(){p(a);let e=c();return m(e.closeModal())}),d(16," Cancelar "),t()()()()}if(l&2){let a=c();r(3),E(" ",a.isEditMode?"Editar Especialidad":"A\xF1adir Especialidad"," "),r(4),_("ngModel",a.selectedEspecialidad.nombre),r(4),_("ngModel",a.selectedEspecialidad.descripcion),r(3),E(" ",a.isEditMode?"Actualizar":"Guardar"," ")}}var H=(()=>{let s=class s{constructor(i){this.http=i,this.especialidades=[],this.selectedEspecialidad={id:0,nombre:"",descripcion:""},this.showModal=!1,this.isEditMode=!1,this.toastMessage=null,this.toastClass="",this.showToastModal=!1}ngOnInit(){this.loadEspecialidades()}loadEspecialidades(){this.http.get("http://143.198.147.110/api/especialidades").subscribe(i=>{this.especialidades=i},i=>{console.error("Error loading especialidades",i)})}addEspecialidad(){this.selectedEspecialidad={id:0,nombre:"",descripcion:""},this.isEditMode=!1,this.showModal=!0}editEspecialidad(i){this.selectedEspecialidad=this.especialidades.find(e=>e.id===i)||this.selectedEspecialidad,this.isEditMode=!0,this.showModal=!0}deleteEspecialidad(i){u.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.http.delete(`http://143.198.147.110/api/especialidades/${i}`).subscribe(()=>{u.default.fire({title:"Eliminado con \xE9xito",text:"La especialidad ha sido eliminada correctamente.",icon:"success",showConfirmButton:!1,timer:2e3}),this.loadEspecialidades()},n=>{u.default.fire({title:"Error al eliminar la especialidad",text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error deleting especialidad",n)})})}saveEspecialidad(){let i=this.isEditMode?`http://143.198.147.110/api/especialidades/${this.selectedEspecialidad.id}`:"http://143.198.147.110/api/especialidades";(this.isEditMode?this.http.put(i,this.selectedEspecialidad):this.http.post(i,this.selectedEspecialidad)).subscribe(()=>{u.default.fire({title:`Especialidad ${this.isEditMode?"actualizada":"creada"} con \xE9xito`,icon:"success",showConfirmButton:!1,timer:2e3}),this.loadEspecialidades(),this.showModal=!1},n=>{u.default.fire({title:`Error al ${this.isEditMode?"actualizar":"crear"} la especialidad`,text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error saving especialidad",n)})}closeModal(){this.showModal=!1}};s.\u0275fac=function(e){return new(e||s)(v(V))},s.\u0275cmp=M({type:s,selectors:[["app-especialidades"]],standalone:!0,features:[y],decls:20,vars:2,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"flex","justify-center","mb-6"],[2,"background-color","#28a745","color","white","padding","10px 20px","border-radius","8px","font-weight","bold",3,"click"],[1,"min-w-full","bg-white","shadow-lg","rounded-lg"],[2,"background-color","#343a40","color","white"],[2,"padding","12px","text-align","left","font-weight","bold","border-bottom","2px solid #dee2e6"],["style","border-bottom: 1px solid #dee2e6;",4,"ngFor","ngForOf"],["style","position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center;",4,"ngIf"],[2,"border-bottom","1px solid #dee2e6"],[2,"padding","10px"],[2,"background-color","#007bff","color","white","padding","6px 12px","border-radius","4px","font-weight","bold","margin-right","4px",3,"click"],[2,"background-color","#dc3545","color","white","padding","6px 12px","border-radius","4px","font-weight","bold",3,"click"],[2,"position","fixed","top","0","left","0","right","0","bottom","0","background-color","rgba(0, 0, 0, 0.5)","display","flex","align-items","center","justify-content","center"],[2,"background-color","white","padding","24px","border-radius","8px","width","350px","box-shadow","0px 4px 10px rgba(0, 0, 0, 0.1)"],[2,"font-size","20px","font-weight","bold","margin-bottom","16px","text-align","center"],[2,"margin-bottom","16px"],[2,"display","block","font-weight","bold","margin-bottom","4px","color","#495057"],["placeholder","Ingrese el nombre",2,"width","100%","padding","8px","border","1px solid #ced4da","border-radius","4px",3,"ngModelChange","ngModel"],["placeholder","Ingrese la descripci\xF3n",2,"width","100%","padding","8px","border","1px solid #ced4da","border-radius","4px",3,"ngModelChange","ngModel"],[2,"display","flex","justify-content","space-between"],[2,"background-color","#007bff","color","white","padding","10px 16px","border-radius","4px","font-weight","bold","width","45%",3,"click"],[2,"background-color","#6c757d","color","white","padding","10px 16px","border-radius","4px","font-weight","bold","width","45%",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"h1",1),d(2,"Gestionar Especialidades"),t(),o(3,"div",2)(4,"button",3),x("click",function(){return n.addEspecialidad()}),d(5," A\xF1adir Especialidad "),t()(),o(6,"table",4)(7,"thead")(8,"tr",5)(9,"th",6),d(10,"ID"),t(),o(11,"th",6),d(12,"Nombre"),t(),o(13,"th",6),d(14,"Descripci\xF3n"),t(),o(15,"th",6),d(16,"Acciones"),t()()(),o(17,"tbody"),h(18,D,12,3,"tr",7),t()(),h(19,N,17,4,"div",8),t()),e&2&&(r(18),g("ngForOf",n.especialidades),r(),g("ngIf",n.showModal))},dependencies:[T,k,S,A,I,F,B],styles:[".toast-notification[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background-color:#fff;padding:16px 24px;border-radius:8px;box-shadow:0 4px 8px #0003;font-weight:700;color:#495057;display:flex;align-items:center;transition:opacity .5s ease;opacity:1}.toast-notification.bg-success[_ngcontent-%COMP%]{background-color:#0d71c2;color:#fff}.toast-notification.bg-error[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}"]});let l=s;return l})();export{H as EspecialidadesComponent};
