import{a as N}from"./chunk-4IA42FLE.js";import{a as W,b as P,e as H,m as F}from"./chunk-OGDTTBTQ.js";import{b as O}from"./chunk-6QFG5ZSD.js";import{Ba as d,Ca as D,Oa as g,Qa as u,Qb as V,Rb as I,Sa as x,Ta as t,Tb as T,Ua as i,Ya as M,Za as m,_a as p,aa as S,db as o,eb as f,fb as w,ib as b,ja as C,jb as E,ka as _,kb as y,mb as v,sa as k}from"./chunk-TYC4EHML.js";function j(a,r){if(a&1&&(t(0,"div"),o(1),i()),a&2){let l=p();x("mt-4 p-2 rounded ",l.toastClass,""),d(),w(" ",l.toastMessage," ")}}var A=(()=>{let r=class r{constructor(){this.sesionClase={id:0,diaSemana:"",horaInicio:"",horaFin:""},this.isEditMode=!1,this.closeModal=new k,this.saveSesionClase=new k,this.toastMessage=null,this.toastClass=""}ngOnInit(){}showToast(n,e){this.toastMessage=n,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}onClose(){this.closeModal.emit()}onSave(){this.saveSesionClase.emit(this.sesionClase)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=S({type:r,selectors:[["app-sesion-clase-modal"]],inputs:{sesionClase:"sesionClase",isEditMode:"isEditMode"},outputs:{closeModal:"closeModal",saveSesionClase:"saveSesionClase"},standalone:!0,features:[v],decls:23,vars:5,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","diaSemana",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el d\xEDa de la semana",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","horaInicio",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","time","placeholder","Ingrese la hora de inicio",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","horaFin",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","time","placeholder","Ingrese la hora de fin",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[3,"class",4,"ngIf"]],template:function(e,s){e&1&&(t(0,"div",0),m("click",function(){return s.onClose()}),t(1,"div",1),m("click",function(c){return c.stopPropagation()}),t(2,"h3",2),o(3),i(),t(4,"div",3)(5,"div",4)(6,"label",5),o(7,"D\xEDa de la Semana"),i(),t(8,"input",6),y("ngModelChange",function(c){return E(s.sesionClase.diaSemana,c)||(s.sesionClase.diaSemana=c),c}),i()(),t(9,"div",4)(10,"label",7),o(11,"Hora de Inicio"),i(),t(12,"input",8),y("ngModelChange",function(c){return E(s.sesionClase.horaInicio,c)||(s.sesionClase.horaInicio=c),c}),i()(),t(13,"div",4)(14,"label",9),o(15,"Hora de Fin"),i(),t(16,"input",10),y("ngModelChange",function(c){return E(s.sesionClase.horaFin,c)||(s.sesionClase.horaFin=c),c}),i()()(),t(17,"div",11)(18,"button",12),m("click",function(){return s.onSave()}),o(19,"Guardar"),i(),t(20,"button",13),m("click",function(){return s.onClose()}),o(21,"Cerrar"),i()(),g(22,j,2,4,"div",14),i()()),e&2&&(d(3),f(s.isEditMode?"Editar Sesi\xF3n de Clase":"A\xF1adir Sesi\xF3n de Clase"),d(5),b("ngModel",s.sesionClase.diaSemana),d(4),b("ngModel",s.sesionClase.horaInicio),d(4),b("ngModel",s.sesionClase.horaFin),d(6),u("ngIf",s.toastMessage))},dependencies:[T,I,F,W,P,H]});let a=r;return a})();function z(a,r){if(a&1){let l=M();t(0,"tr")(1,"td",3),o(2),i(),t(3,"td",3),o(4),i(),t(5,"td",3),o(6),i(),t(7,"td",3),o(8),i(),t(9,"td",3)(10,"button",9),m("click",function(){let e=C(l).$implicit,s=p();return _(s.editSesionClase(e.id))}),o(11,"Editar"),i(),t(12,"button",10),m("click",function(){let e=C(l).$implicit,s=p();return _(s.confirmDelete(e.id))}),o(13,"Eliminar"),i()()()}if(a&2){let l=r.$implicit;d(2),f(l.id),d(2),f(l.diaSemana),d(2),f(l.horaInicio),d(2),f(l.horaFin)}}function G(a,r){if(a&1&&(t(0,"div"),o(1),i()),a&2){let l=p();x("mt-4 p-2 rounded ",l.toastClass,""),d(),w(" ",l.toastMessage," ")}}function q(a,r){if(a&1){let l=M();t(0,"app-sesion-clase-modal",11),m("closeModal",function(){C(l);let e=p();return _(e.handleCloseModal())})("saveSesionClase",function(e){C(l);let s=p();return _(s.saveSesionClase(e))}),i()}if(a&2){let l=p();u("sesionClase",l.selectedSesionClase)("isEditMode",l.isEditMode)}}function J(a,r){if(a&1){let l=M();t(0,"app-confirm-modal",12),m("confirm",function(){C(l);let e=p();return _(e.deleteSesionClase())})("cancel",function(){C(l);let e=p();return _(e.cancelDelete())}),i()}a&2&&u("message","\xBFEst\xE1 seguro que desea eliminar esta sesi\xF3n de clase?")}var oe=(()=>{let r=class r{constructor(n){this.http=n,this.sesionesClase=[],this.selectedSesionClase={id:0,diaSemana:"",horaInicio:"",horaFin:""},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.toastMessage=null,this.toastClass="",this.sesionClaseIdToDelete=null}ngOnInit(){this.loadSesionesClase()}loadSesionesClase(){this.http.get("http://68.183.146.53/sesionesclase/").subscribe(n=>{this.sesionesClase=n},n=>{console.error("Error loading sesiones de clase",n)})}editSesionClase(n){this.selectedSesionClase=this.sesionesClase.find(e=>e.id===n)||this.selectedSesionClase,this.isEditMode=!0,this.showModal=!0}addSesionClase(){this.selectedSesionClase={id:0,diaSemana:"",horaInicio:"",horaFin:""},this.isEditMode=!1,this.showModal=!0}confirmDelete(n){this.sesionClaseIdToDelete=n,this.showConfirmModal=!0}deleteSesionClase(){this.sesionClaseIdToDelete!==null&&this.http.delete(`http://68.183.146.53/sesionesclase/${this.sesionClaseIdToDelete}`).subscribe(()=>{this.showToast("Sesi\xF3n de clase eliminada con \xE9xito","success"),this.loadSesionesClase(),this.sesionClaseIdToDelete=null,this.showConfirmModal=!1},n=>{this.showToast("Error al eliminar la sesi\xF3n de clase","error"),console.error("Error deleting sesion de clase",n)})}cancelDelete(){this.sesionClaseIdToDelete=null,this.showConfirmModal=!1}saveSesionClase(n){this.isEditMode?this.http.put(`http://68.183.146.53/sesionesclase/${n.id}`,n).subscribe(e=>{this.showToast("Sesi\xF3n de clase actualizada con \xE9xito","success"),this.loadSesionesClase()},e=>{this.showToast("Error al actualizar la sesi\xF3n de clase","error"),console.error("Error updating sesion de clase",e)}):this.http.post("http://68.183.146.53/sesionesclase/",n).subscribe(e=>{this.showToast("Sesi\xF3n de clase creada con \xE9xito","success"),this.loadSesionesClase()},e=>{this.showToast("Error al crear la sesi\xF3n de clase","error"),console.error("Error creating sesion de clase",e)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(n,e){this.toastMessage=n,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};r.\u0275fac=function(e){return new(e||r)(D(O))},r.\u0275cmp=S({type:r,selectors:[["app-sesion-clase"]],standalone:!0,features:[v],decls:23,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md","mt-4",3,"click"],[3,"class",4,"ngIf"],[3,"sesionClase","isEditMode","closeModal","saveSesionClase",4,"ngIf"],[3,"message","confirm","cancel",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveSesionClase","sesionClase","isEditMode"],[3,"confirm","cancel","message"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"h1",1),o(2,"Gestionar Sesiones de Clase"),i(),t(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),o(7,"ID"),i(),t(8,"th",3),o(9,"D\xEDa de la Semana"),i(),t(10,"th",3),o(11,"Hora de Inicio"),i(),t(12,"th",3),o(13,"Hora de Fin"),i(),t(14,"th",3),o(15,"Acciones"),i()()(),t(16,"tbody"),g(17,z,14,4,"tr",4),i()(),t(18,"button",5),m("click",function(){return s.addSesionClase()}),o(19,"A\xF1adir Sesi\xF3n de Clase"),i(),g(20,G,2,4,"div",6),i(),g(21,q,1,2,"app-sesion-clase-modal",7)(22,J,1,1,"app-confirm-modal",8)),e&2&&(d(17),u("ngForOf",s.sesionesClase),d(3),u("ngIf",s.toastMessage),d(),u("ngIf",s.showModal),d(),u("ngIf",s.showConfirmModal))},dependencies:[T,V,I,F,A,N],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#011d3a;color:#fff}"]});let a=r;return a})();export{oe as SesionClaseComponent};
