import{a as j}from"./chunk-4IA42FLE.js";import{a as N,b as P,e as A,m as b}from"./chunk-OGDTTBTQ.js";import{b as O}from"./chunk-6QFG5ZSD.js";import{Ba as c,Ca as v,Oa as F,Pb as I,Qa as f,Qb as V,Rb as D,Ta as i,Tb as M,Ua as o,Ya as g,Za as d,_a as u,aa as x,db as r,eb as y,fb as E,ib as T,ja as m,jb as S,ka as p,kb as k,mb as C,sa as w}from"./chunk-TYC4EHML.js";var W=(()=>{let a=class a{constructor(){this.faculty={id:0,nombre:""},this.isEditMode=!1,this.closeModal=new w,this.saveFaculty=new w}onClose(){this.closeModal.emit()}onSave(){this.saveFaculty.emit(this.faculty)}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=x({type:a,selectors:[["app-faculty-modal"]],inputs:{faculty:"faculty",isEditMode:"isEditMode"},outputs:{closeModal:"closeModal",saveFaculty:"saveFaculty"},standalone:!0,features:[C],decls:14,vars:2,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","nombre",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el nombre",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0),d("click",function(){return n.onClose()}),i(1,"div",1),d("click",function(_){return _.stopPropagation()}),i(2,"h3",2),r(3),o(),i(4,"div",3)(5,"div",4)(6,"label",5),r(7,"Nombre"),o(),i(8,"input",6),k("ngModelChange",function(_){return S(n.faculty.nombre,_)||(n.faculty.nombre=_),_}),o()()(),i(9,"div",7)(10,"button",8),d("click",function(){return n.onSave()}),r(11,"Guardar"),o(),i(12,"button",9),d("click",function(){return n.onClose()}),r(13,"Cerrar"),o()()()()),t&2&&(c(3),y(n.isEditMode?"Editar Facultad":"A\xF1adir Facultad"),c(5),T("ngModel",n.faculty.nombre))},dependencies:[M,b,N,P,A]});let l=a;return l})();function z(l,a){if(l&1){let s=g();i(0,"tr")(1,"td",3),r(2),o(),i(3,"td",3),r(4),o(),i(5,"td",3)(6,"button",10),d("click",function(){let t=m(s).$implicit,n=u();return p(n.editFaculty(t.id))}),r(7,"Editar"),o(),i(8,"button",11),d("click",function(){let t=m(s).$implicit,n=u();return p(n.confirmDelete(t.id))}),r(9,"Eliminar"),o()()()}if(l&2){let s=a.$implicit;c(2),y(s.id),c(2),y(s.nombre)}}function G(l,a){if(l&1){let s=g();i(0,"app-faculty-modal",12),d("closeModal",function(){m(s);let t=u();return p(t.handleCloseModal())})("saveFaculty",function(t){m(s);let n=u();return p(n.saveFaculty(t))}),o()}if(l&2){let s=u();f("faculty",s.selectedFaculty)("isEditMode",s.isEditMode)}}function B(l,a){if(l&1){let s=g();i(0,"app-confirm-modal",13),d("confirm",function(){m(s);let t=u();return p(t.deleteFaculty())})("cancel",function(){m(s);let t=u();return p(t.handleCloseConfirmModal())}),o()}}function H(l,a){if(l&1&&(i(0,"div",14),r(1),o()),l&2){let s=u();f("ngClass",s.toastClass),c(),E(" ",s.toastMessage,`
`)}}var nt=(()=>{let a=class a{constructor(e){this.http=e,this.faculties=[],this.selectedFaculty={id:0,nombre:""},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.facultyIdToDelete=null,this.toastMessage=null,this.toastClass=""}ngOnInit(){this.loadFaculties()}loadFaculties(){this.http.get("http://68.183.146.53/facultades/").subscribe(e=>{this.faculties=e},e=>{console.error("Error loading faculties",e)})}editFaculty(e){this.selectedFaculty=this.faculties.find(t=>t.id===e)||this.selectedFaculty,this.isEditMode=!0,this.showModal=!0}addFaculty(){this.selectedFaculty={id:0,nombre:""},this.isEditMode=!1,this.showModal=!0}confirmDelete(e){this.facultyIdToDelete=e,this.showConfirmModal=!0}deleteFaculty(){this.facultyIdToDelete!==null&&this.http.delete(`http://68.183.146.53/facultades/${this.facultyIdToDelete}`).subscribe(()=>{this.showToast("Facultad eliminada con \xE9xito","success"),this.loadFaculties(),this.facultyIdToDelete=null,this.showConfirmModal=!1},e=>{this.showToast("Error al eliminar la facultad","error"),console.error("Error deleting faculty",e)})}cancelDelete(){this.facultyIdToDelete=null,this.showConfirmModal=!1}saveFaculty(e){this.isEditMode?this.http.put(`http://68.183.146.53/facultades/${e.id}`,e).subscribe(t=>{this.showToast("Facultad actualizada con \xE9xito","success"),this.loadFaculties()},t=>{this.showToast("Error al actualizar la facultad","error"),console.error("Error updating faculty",t)}):this.http.post("http://68.183.146.53/facultades/",e).subscribe(t=>{this.showToast("Facultad creada con \xE9xito","success"),console.log("F"),this.loadFaculties()},t=>{this.showToast("Error al crear la facultad","error"),console.error("Error creating faculty",t)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(e,t){this.toastMessage=e,this.toastClass=t==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};a.\u0275fac=function(t){return new(t||a)(v(O))},a.\u0275cmp=x({type:a,selectors:[["app-faculties"]],standalone:!0,features:[C],decls:20,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"min-w-full","bg-white","text-center"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"flex","justify-start","mt-4"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md",3,"click"],[3,"faculty","isEditMode","closeModal","saveFaculty",4,"ngIf"],[3,"confirm","cancel",4,"ngIf"],["class","toast",3,"ngClass",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveFaculty","faculty","isEditMode"],[3,"confirm","cancel"],[1,"toast",3,"ngClass"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"h1",1),r(2,"Gestionar Facultades"),o(),i(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),r(7,"ID"),o(),i(8,"th",3),r(9,"Nombre"),o(),i(10,"th",3),r(11,"Acciones"),o()()(),i(12,"tbody"),F(13,z,10,2,"tr",4),o()(),i(14,"div",5)(15,"button",6),d("click",function(){return n.addFaculty()}),r(16,"A\xF1adir Facultad"),o()()(),F(17,G,1,2,"app-faculty-modal",7)(18,B,1,0,"app-confirm-modal",8)(19,H,2,2,"div",9)),t&2&&(c(13),f("ngForOf",n.faculties),c(4),f("ngIf",n.showModal),c(),f("ngIf",n.showConfirmModal),c(),f("ngIf",n.toastMessage))},dependencies:[M,I,V,D,b,W,j],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#011d3a;color:#fff}"]});let l=a;return l})();export{nt as FacultiesComponent};
