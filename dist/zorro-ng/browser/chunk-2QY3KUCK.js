import{a as A}from"./chunk-4IA42FLE.js";import{a as N,b as P,e as j,m as I}from"./chunk-OGDTTBTQ.js";import{b as T}from"./chunk-6QFG5ZSD.js";import{Ba as d,Ca as M,Oa as g,Pb as v,Qa as c,Qb as O,Rb as E,Ta as o,Tb as y,Ua as a,Ya as b,Za as m,_a as p,aa as C,db as l,eb as x,fb as w,ib as k,ja as u,jb as V,ka as h,kb as F,mb as D,sa as S}from"./chunk-TYC4EHML.js";function H(n,s){if(n&1&&(o(0,"div",11),l(1),a()),n&2){let i=p();c("ngClass",i.toastClass),d(),w(" ",i.toastMessage,`
`)}}var W=(()=>{let s=class s{constructor(t){this.http=t,this.departamento={id:0,nombre:""},this.isEditMode=!1,this.closeModal=new S,this.saveDepartamento=new S,this.toastMessage=null,this.toastClass=""}ngOnInit(){}showToast(t,e){this.toastMessage=t,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}onClose(){this.closeModal.emit()}onSave(){this.saveDepartamento.emit(this.departamento)}};s.\u0275fac=function(e){return new(e||s)(M(T))},s.\u0275cmp=C({type:s,selectors:[["app-departamento-modal"]],inputs:{departamento:"departamento",isEditMode:"isEditMode"},outputs:{closeModal:"closeModal",saveDepartamento:"saveDepartamento"},standalone:!0,features:[D],decls:15,vars:3,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","nombre",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el nombre",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],["class","fixed bottom-4 left-4 px-4 py-2 rounded shadow-lg",3,"ngClass",4,"ngIf"],[1,"fixed","bottom-4","left-4","px-4","py-2","rounded","shadow-lg",3,"ngClass"]],template:function(e,r){e&1&&(o(0,"div",0),m("click",function(){return r.onClose()}),o(1,"div",1),m("click",function(_){return _.stopPropagation()}),o(2,"h3",2),l(3),a(),o(4,"div",3)(5,"div",4)(6,"label",5),l(7,"Nombre"),a(),o(8,"input",6),F("ngModelChange",function(_){return V(r.departamento.nombre,_)||(r.departamento.nombre=_),_}),a()()(),o(9,"div",7)(10,"button",8),m("click",function(){return r.onSave()}),l(11,"Guardar"),a(),o(12,"button",9),m("click",function(){return r.onClose()}),l(13,"Cerrar"),a()()()(),g(14,H,2,2,"div",10)),e&2&&(d(3),x(r.isEditMode?"Editar Departamento":"A\xF1adir Departamento"),d(5),k("ngModel",r.departamento.nombre),d(6),c("ngIf",r.toastMessage))},dependencies:[y,v,E,I,N,P,j]});let n=s;return n})();function B(n,s){if(n&1){let i=b();o(0,"tr")(1,"td",3),l(2),a(),o(3,"td",3),l(4),a(),o(5,"td",3)(6,"button",10),m("click",function(){let e=u(i).$implicit,r=p();return h(r.editDepartamento(e.id))}),l(7,"Editar"),a(),o(8,"button",11),m("click",function(){let e=u(i).$implicit,r=p();return h(r.confirmDelete(e.id))}),l(9,"Eliminar"),a()()()}if(n&2){let i=s.$implicit;d(2),x(i.id),d(2),x(i.nombre)}}function L(n,s){if(n&1){let i=b();o(0,"app-departamento-modal",12),m("closeModal",function(){u(i);let e=p();return h(e.handleCloseModal())})("saveDepartamento",function(e){u(i);let r=p();return h(r.saveDepartamento(e))}),a()}if(n&2){let i=p();c("departamento",i.selectedDepartamento)("isEditMode",i.isEditMode)}}function q(n,s){if(n&1){let i=b();o(0,"app-confirm-modal",13),m("confirm",function(){u(i);let e=p();return h(e.deleteDepartamento())})("cancel",function(){u(i);let e=p();return h(e.handleCloseConfirmModal())}),a()}}function J(n,s){if(n&1&&(o(0,"div",14),l(1),a()),n&2){let i=p();c("ngClass",i.toastClass),d(),w(" ",i.toastMessage,`
`)}}var ie=(()=>{let s=class s{constructor(t){this.http=t,this.departamentos=[],this.selectedDepartamento={id:0,nombre:""},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.departamentoIdToDelete=null,this.toastMessage=null,this.toastClass=""}ngOnInit(){this.loadDepartamentos()}loadDepartamentos(){this.http.get("http://68.183.146.53/departamentos/").subscribe(t=>{this.departamentos=t},t=>{console.error("Error loading departamentos",t)})}editDepartamento(t){this.selectedDepartamento=this.departamentos.find(e=>e.id===t)||this.selectedDepartamento,this.isEditMode=!0,this.showModal=!0}addDepartamento(){this.selectedDepartamento={id:0,nombre:""},this.isEditMode=!1,this.showModal=!0}confirmDelete(t){this.departamentoIdToDelete=t,this.showConfirmModal=!0}deleteDepartamento(){this.departamentoIdToDelete!==null&&this.http.delete(`http://68.183.146.53/departamentos/${this.departamentoIdToDelete}`).subscribe(()=>{this.showToast("Departamento eliminado con \xE9xito","success"),this.loadDepartamentos(),this.departamentoIdToDelete=null,this.showConfirmModal=!1},t=>{this.showToast("Error al eliminar el departamento","error"),console.error("Error deleting departamento",t)})}cancelDelete(){this.departamentoIdToDelete=null,this.showConfirmModal=!1}saveDepartamento(t){this.isEditMode?this.http.put(`http://68.183.146.53/departamentos/${t.id}`,t).subscribe(e=>{this.showToast("Departamento actualizado con \xE9xito","success"),this.loadDepartamentos()},e=>{this.showToast("Error al actualizar el departamento","error"),console.error("Error updating departamento",e)}):this.http.post("http://68.183.146.53/departamentos/",t).subscribe(e=>{this.showToast("Departamento creado con \xE9xito","success"),this.loadDepartamentos()},e=>{this.showToast("Error al crear el departamento","error"),console.error("Error creating departamento",e)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(t,e){this.toastMessage=t,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};s.\u0275fac=function(e){return new(e||s)(M(T))},s.\u0275cmp=C({type:s,selectors:[["app-departamento"]],standalone:!0,features:[D],decls:20,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"min-w-full","bg-white","text-center"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"flex","justify-start","mt-4"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md",3,"click"],[3,"departamento","isEditMode","closeModal","saveDepartamento",4,"ngIf"],[3,"confirm","cancel",4,"ngIf"],["class","fixed bottom-4 left-4 px-4 py-2 rounded shadow-lg",3,"ngClass",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveDepartamento","departamento","isEditMode"],[3,"confirm","cancel"],[1,"fixed","bottom-4","left-4","px-4","py-2","rounded","shadow-lg",3,"ngClass"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"h1",1),l(2,"Gestionar Departamentos"),a(),o(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),l(7,"ID"),a(),o(8,"th",3),l(9,"Nombre"),a(),o(10,"th",3),l(11,"Acciones"),a()()(),o(12,"tbody"),g(13,B,10,2,"tr",4),a()(),o(14,"div",5)(15,"button",6),m("click",function(){return r.addDepartamento()}),l(16,"A\xF1adir Departamento"),a()()(),g(17,L,1,2,"app-departamento-modal",7)(18,q,1,0,"app-confirm-modal",8)(19,J,2,2,"div",9)),e&2&&(d(13),c("ngForOf",r.departamentos),d(4),c("ngIf",r.showModal),d(),c("ngIf",r.showConfirmModal),d(),c("ngIf",r.toastMessage))},dependencies:[y,v,O,E,I,W,A],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#011d3a;color:#fff}"]});let n=s;return n})();export{ie as DepartamentoComponent};
