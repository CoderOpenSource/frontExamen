import{a as T}from"./chunk-MSGFT5JS.js";import{b as P}from"./chunk-6QFG5ZSD.js";import{Ba as a,Ca as S,Oa as g,Qa as m,Qb as w,Rb as y,Ta as t,Tb as C,Ua as e,Ya as E,Za as h,_a as v,aa as b,cb as _,d as F,db as i,eb as d,ja as x,ka as u,mb as I}from"./chunk-TYC4EHML.js";var p=F(T());function L(r,o){if(r&1){let n=E();t(0,"div",5)(1,"input",6,0),h("change",function(c){x(n);let s=v();return u(s.onFileSelected(c))}),e(),t(3,"button",7),h("click",function(){x(n);let c=_(2);return u(c.click())}),i(4," Subir Pacientes "),e()()}}function k(r,o){r&1&&(t(0,"div",5)(1,"div",8)(2,"span",9),i(3,"Cargando..."),e()()())}function j(r,o){if(r&1&&(t(0,"tr",14)(1,"td",15),i(2),e(),t(3,"td",15),i(4),e(),t(5,"td",15),i(6),e(),t(7,"td",15),i(8),e(),t(9,"td",15),i(10),e(),t(11,"td",15),i(12),e(),t(13,"td",15),i(14),e(),t(15,"td",15),i(16),e(),t(17,"td",15),i(18),e()()),r&2){let n=o.$implicit;a(2),d(n.id),a(2),d(n.usuario.nombre),a(2),d(n.usuario.apellido),a(2),d(n.usuario.email),a(2),d(n.carnet),a(2),d(n.sexo),a(2),d(n.edad),a(2),d(n.fechaInicioSeguro),a(2),d(n.fechaFinSeguro)}}function A(r,o){if(r&1&&(t(0,"table",10)(1,"thead")(2,"tr",11)(3,"th",12),i(4,"ID"),e(),t(5,"th",12),i(6,"Nombre"),e(),t(7,"th",12),i(8,"Apellido"),e(),t(9,"th",12),i(10,"Email"),e(),t(11,"th",12),i(12,"Carnet"),e(),t(13,"th",12),i(14,"Sexo"),e(),t(15,"th",12),i(16,"Edad"),e(),t(17,"th",12),i(18,"Inicio Seguro"),e(),t(19,"th",12),i(20,"Fin Seguro"),e()()(),t(21,"tbody"),g(22,j,19,9,"tr",13),e()()),r&2){let n=v();a(22),m("ngForOf",n.pacientes)}}var M=(()=>{let o=class o{constructor(l){this.http=l,this.pacientes=[],this.isLoading=!1}ngOnInit(){this.loadPacientes()}loadPacientes(){this.http.get("http://143.198.147.110/api/pacientes").subscribe(l=>{this.pacientes=l},l=>{p.default.fire({title:"Error al cargar pacientes",text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error loading pacientes",l)})}onFileSelected(l){let c=l.target.files[0];if(c){let s=new FormData;s.append("file",c),this.isLoading=!0,this.http.post("http://143.198.147.110/api/pacientes/cargar",s,{responseType:"json"}).subscribe(f=>{this.isLoading=!1,f&&f.mensaje?(p.default.fire({title:"Archivo cargado con \xE9xito",text:"Los pacientes se han actualizado correctamente.",icon:"success",showConfirmButton:!1,timer:2e3}),this.loadPacientes()):p.default.fire({title:"Error al cargar el archivo",text:"El archivo fue recibido, pero ocurri\xF3 un problema al procesarlo.",icon:"warning",confirmButtonText:"Aceptar"})},f=>{this.isLoading=!1,p.default.fire({title:"Error al cargar el archivo",text:"Por favor, verifica el archivo y vuelve a intentarlo.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error uploading file",f)})}}};o.\u0275fac=function(c){return new(c||o)(S(P))},o.\u0275cmp=b({type:o,selectors:[["app-paciente"]],standalone:!0,features:[I],decls:6,vars:3,consts:[["fileInput",""],[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],["class","flex justify-center mb-6",4,"ngIf"],["class","min-w-full bg-white shadow-lg rounded-lg",4,"ngIf"],[1,"flex","justify-center","mb-6"],["type","file","accept",".xlsx, .xls",1,"hidden",3,"change"],[2,"background-color","#28a745","color","white","padding","10px 20px","border-radius","8px","font-weight","bold",3,"click"],["role","status",1,"spinner-border","animate-spin","inline-block","w-8","h-8","border-4","rounded-full"],[1,"visually-hidden"],[1,"min-w-full","bg-white","shadow-lg","rounded-lg"],[2,"background-color","#343a40","color","white"],[2,"padding","12px","text-align","left","font-weight","bold","border-bottom","2px solid #dee2e6"],["style","border-bottom: 1px solid #dee2e6;",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid #dee2e6"],[2,"padding","10px"]],template:function(c,s){c&1&&(t(0,"div",1)(1,"h1",2),i(2,"Gestionar Pacientes"),e(),g(3,L,5,0,"div",3)(4,k,4,0,"div",3)(5,A,23,1,"table",4),e()),c&2&&(a(3),m("ngIf",!s.isLoading),a(),m("ngIf",s.isLoading),a(),m("ngIf",!s.isLoading))},dependencies:[C,w,y]});let r=o;return r})();export{M as PacienteComponent};
