import{a as L}from"./chunk-4IA42FLE.js";import{a as N,b as W,e as P,h as A,i as j,k as B,m as D}from"./chunk-OGDTTBTQ.js";import{b as O}from"./chunk-6QFG5ZSD.js";import{Ba as d,Ca as b,Oa as _,Pb as I,Qa as m,Qb as k,Rb as F,Ta as r,Tb as V,Ua as a,Ya as w,Za as p,_a as u,aa as x,db as n,eb as f,fb as y,ib as E,ja as C,jb as v,ka as g,kb as S,mb as T,sa as M}from"./chunk-TYC4EHML.js";function q(l,s){if(l&1&&(r(0,"option",17),n(1),a()),l&2){let o=s.$implicit;m("ngValue",o.id),d(),f(o.nombre)}}function J(l,s){if(l&1&&(r(0,"div",18),n(1),a()),l&2){let o=u();m("ngClass",o.toastClass),d(),y(" ",o.toastMessage,`
`)}}var U=(()=>{let s=class s{constructor(e){this.http=e,this.carrera={id:0,nombre:"",codigo:"",facultad:{id:null,nombre:""}},this.isEditMode=!1,this.closeModal=new M,this.saveCarrera=new M,this.carreraCreatedOrUpdated=new M,this.facultades=[],this.toastMessage=null,this.toastClass=""}ngOnInit(){this.loadFacultades(),this.isEditMode||(this.carrera.facultad.id=null)}loadFacultades(){this.http.get("http://68.183.146.53/facultades/").subscribe(e=>{this.facultades=e},e=>{console.error("Error loading facultades",e)})}showToast(e,t){this.toastMessage=e,this.toastClass=t==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}onClose(){this.closeModal.emit()}onSave(){this.saveCarrera.emit(this.carrera)}};s.\u0275fac=function(t){return new(t||s)(b(O))},s.\u0275cmp=x({type:s,selectors:[["app-carrera-modal"]],inputs:{carrera:"carrera",isEditMode:"isEditMode"},outputs:{closeModal:"closeModal",saveCarrera:"saveCarrera",carreraCreatedOrUpdated:"carreraCreatedOrUpdated"},standalone:!0,features:[T],decls:26,vars:7,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","nombre",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el nombre",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","codigo",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el c\xF3digo",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","facultad",1,"block","text-gray-700","text-sm","font-bold","mb-2"],[1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],["class","fixed bottom-4 left-4 px-4 py-2 rounded shadow-lg",3,"ngClass",4,"ngIf"],[3,"ngValue"],[1,"fixed","bottom-4","left-4","px-4","py-2","rounded","shadow-lg",3,"ngClass"]],template:function(t,i){t&1&&(r(0,"div",0),p("click",function(){return i.onClose()}),r(1,"div",1),p("click",function(c){return c.stopPropagation()}),r(2,"h3",2),n(3),a(),r(4,"div",3)(5,"div",4)(6,"label",5),n(7,"Nombre"),a(),r(8,"input",6),S("ngModelChange",function(c){return v(i.carrera.nombre,c)||(i.carrera.nombre=c),c}),a()(),r(9,"div",4)(10,"label",7),n(11,"C\xF3digo"),a(),r(12,"input",8),S("ngModelChange",function(c){return v(i.carrera.codigo,c)||(i.carrera.codigo=c),c}),a()(),r(13,"div",4)(14,"label",9),n(15,"Facultad"),a(),r(16,"select",10),S("ngModelChange",function(c){return v(i.carrera.facultad.id,c)||(i.carrera.facultad.id=c),c}),r(17,"option",11),n(18,"Seleccione una facultad"),a(),_(19,q,2,2,"option",12),a()()(),r(20,"div",13)(21,"button",14),p("click",function(){return i.onSave()}),n(22,"Guardar"),a(),r(23,"button",15),p("click",function(){return i.onClose()}),n(24,"Cerrar"),a()()()(),_(25,J,2,2,"div",16)),t&2&&(d(3),f(i.isEditMode?"Editar Carrera":"A\xF1adir Carrera"),d(5),E("ngModel",i.carrera.nombre),d(4),E("ngModel",i.carrera.codigo),d(4),E("ngModel",i.carrera.facultad.id),d(),m("ngValue",null),d(2),m("ngForOf",i.facultades),d(6),m("ngIf",i.toastMessage))},dependencies:[V,I,k,F,D,j,B,N,A,W,P]});let l=s;return l})();function K(l,s){if(l&1){let o=w();r(0,"tr")(1,"td",3),n(2),a(),r(3,"td",3),n(4),a(),r(5,"td",3),n(6),a(),r(7,"td",3),n(8),a(),r(9,"td",3)(10,"button",10),p("click",function(){let t=C(o).$implicit,i=u();return g(i.editCarrera(t.id))}),n(11,"Editar"),a(),r(12,"button",11),p("click",function(){let t=C(o).$implicit,i=u();return g(i.confirmDelete(t.id))}),n(13,"Eliminar"),a()()()}if(l&2){let o=s.$implicit;d(2),f(o.id),d(2),f(o.nombre),d(2),f(o.codigo),d(2),f(o.facultad.nombre)}}function Q(l,s){if(l&1){let o=w();r(0,"app-carrera-modal",12),p("closeModal",function(){C(o);let t=u();return g(t.handleCloseModal())})("saveCarrera",function(t){C(o);let i=u();return g(i.saveCarrera(t))}),a()}if(l&2){let o=u();m("carrera",o.selectedCarrera)("isEditMode",o.isEditMode)}}function R(l,s){if(l&1){let o=w();r(0,"app-confirm-modal",13),p("confirm",function(){C(o);let t=u();return g(t.deleteCarrera())})("cancel",function(){C(o);let t=u();return g(t.handleCloseConfirmModal())}),a()}}function X(l,s){if(l&1&&(r(0,"div",14),n(1),a()),l&2){let o=u();m("ngClass",o.toastClass),d(),y(" ",o.toastMessage,`
`)}}var de=(()=>{let s=class s{constructor(e){this.http=e,this.carreras=[],this.selectedCarrera={id:0,nombre:"",codigo:"",facultad:{id:null,nombre:""}},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.carreraIdToDelete=null,this.toastMessage=null,this.toastClass=""}ngOnInit(){this.loadCarreras()}loadCarreras(){this.http.get("http://68.183.146.53/carreras/").subscribe(e=>{this.carreras=e},e=>{console.error("Error loading carreras",e)})}editCarrera(e){this.selectedCarrera=this.carreras.find(t=>t.id===e)||this.selectedCarrera,this.isEditMode=!0,this.showModal=!0}addCarrera(){this.selectedCarrera={id:0,nombre:"",codigo:"",facultad:{id:null,nombre:""}},this.isEditMode=!1,this.showModal=!0}confirmDelete(e){this.carreraIdToDelete=e,this.showConfirmModal=!0}deleteCarrera(){this.carreraIdToDelete!==null&&this.http.delete(`http://68.183.146.53/carreras/${this.carreraIdToDelete}`).subscribe(()=>{this.showToast("Carrera eliminada con \xE9xito","success"),this.loadCarreras(),this.carreraIdToDelete=null,this.showConfirmModal=!1},e=>{this.showToast("Error al eliminar la carrera","error"),console.error("Error deleting carrera",e)})}cancelDelete(){this.carreraIdToDelete=null,this.showConfirmModal=!1}saveCarrera(e){this.isEditMode?this.http.put(`http://68.183.146.53/carreras/${e.id}`,e).subscribe(t=>{this.showToast("Carrera actualizada con \xE9xito","success"),this.loadCarreras()},t=>{this.showToast("Error al actualizar la carrera","error"),console.error("Error updating carrera",t)}):this.http.post("http://68.183.146.53/carreras/",e).subscribe(t=>{this.showToast("Carrera creada con \xE9xito","success"),this.loadCarreras()},t=>{this.showToast("Error al crear la carrera","error"),console.error("Error creating carrera",t)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(e,t){this.toastMessage=e,this.toastClass=t==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};s.\u0275fac=function(t){return new(t||s)(b(O))},s.\u0275cmp=x({type:s,selectors:[["app-carreras"]],standalone:!0,features:[T],decls:24,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"min-w-full","bg-white","text-center"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"flex","justify-start","mt-4"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md",3,"click"],[3,"carrera","isEditMode","closeModal","saveCarrera",4,"ngIf"],[3,"confirm","cancel",4,"ngIf"],["class","toast",3,"ngClass",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveCarrera","carrera","isEditMode"],[3,"confirm","cancel"],[1,"toast",3,"ngClass"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"h1",1),n(2,"Gestionar Carreras"),a(),r(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),n(7,"ID"),a(),r(8,"th",3),n(9,"Nombre"),a(),r(10,"th",3),n(11,"C\xF3digo"),a(),r(12,"th",3),n(13,"Facultad"),a(),r(14,"th",3),n(15,"Acciones"),a()()(),r(16,"tbody"),_(17,K,14,4,"tr",4),a()(),r(18,"div",5)(19,"button",6),p("click",function(){return i.addCarrera()}),n(20,"A\xF1adir Carrera"),a()()(),_(21,Q,1,2,"app-carrera-modal",7)(22,R,1,0,"app-confirm-modal",8)(23,X,2,2,"div",9)),t&2&&(d(17),m("ngForOf",i.carreras),d(4),m("ngIf",i.showModal),d(),m("ngIf",i.showConfirmModal),d(),m("ngIf",i.toastMessage))},dependencies:[V,I,k,F,D,U,L],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#011d3a;color:#fff}"]});let l=s;return l})();export{de as CarrerasComponent};
