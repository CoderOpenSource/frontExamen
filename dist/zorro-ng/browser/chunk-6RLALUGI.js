import{a as $}from"./chunk-4IA42FLE.js";import{a as O,b as N,e as W,h as B,i as j,j as G,k as L,m as k}from"./chunk-OGDTTBTQ.js";import{b as F}from"./chunk-6QFG5ZSD.js";import{Ba as s,Ca as w,Oa as h,Qa as d,Qb as S,Rb as v,Sa as E,Ta as i,Tb as T,Ua as o,Ya as P,Za as g,_a as p,aa as b,db as c,eb as u,fb as y,hb as D,ib as A,ja as f,jb as x,ka as C,kb as M,mb as I,sa as V}from"./chunk-TYC4EHML.js";function J(r,l){if(r&1&&(i(0,"option",7),c(1),o()),r&2){let n=l.$implicit;d("ngValue",n.id),s(),u(n.nombre)}}function K(r,l){if(r&1&&(i(0,"option",7),c(1),o()),r&2){let n=l.$implicit;d("ngValue",n.id),s(),u(n.nombre)}}function Q(r,l){if(r&1&&(i(0,"option",7),c(1),o()),r&2){let n=l.$implicit;d("ngValue",n.id),s(),D("",n.diaSemana,": ",n.horaInicio," - ",n.horaFin,"")}}function R(r,l){if(r&1&&(i(0,"div"),c(1),o()),r&2){let n=p();E("mt-4 p-2 rounded ",n.toastClass,""),s(),y(" ",n.toastMessage," ")}}var z=(()=>{let l=class l{constructor(e){this.http=e,this.programacionAcademica={id:0,materiaId:null,aulaId:null,sesionClaseIds:[],grupo:""},this.isEditMode=!1,this.materias=[],this.aulas=[],this.sesionesClase=[],this.closeModal=new V,this.saveProgramacionAcademica=new V,this.toastMessage=null,this.toastClass=""}ngOnInit(){}showToast(e,t){this.toastMessage=e,this.toastClass=t==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}onClose(){this.closeModal.emit()}onSave(){this.saveProgramacionAcademica.emit(this.programacionAcademica)}};l.\u0275fac=function(t){return new(t||l)(w(F))},l.\u0275cmp=b({type:l,selectors:[["app-programacion-academica-modal"]],inputs:{programacionAcademica:"programacionAcademica",isEditMode:"isEditMode",materias:"materias",aulas:"aulas",sesionesClase:"sesionesClase"},outputs:{closeModal:"closeModal",saveProgramacionAcademica:"saveProgramacionAcademica"},standalone:!0,features:[I],decls:34,vars:11,consts:[[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center","text-blue-700","font-bold"],[1,"mt-4"],[1,"mb-4"],["for","materia",1,"block","text-gray-700","text-sm","font-bold","mb-2"],[1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","aula",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["for","sesionClaseIds",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["multiple","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","grupo",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["placeholder","Ingrese el grupo",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","px-4","py-3","space-x-4"],[1,"px-4","py-2","bg-blue-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","shadow-sm","w-1/2",3,"click"],[3,"class",4,"ngIf"]],template:function(t,a){t&1&&(i(0,"div",0),g("click",function(){return a.onClose()}),i(1,"div",1),g("click",function(m){return m.stopPropagation()}),i(2,"h3",2),c(3),o(),i(4,"div",3)(5,"div",4)(6,"label",5),c(7,"Materia"),o(),i(8,"select",6),M("ngModelChange",function(m){return x(a.programacionAcademica.materiaId,m)||(a.programacionAcademica.materiaId=m),m}),i(9,"option",7),c(10,"Seleccione una materia"),o(),h(11,J,2,2,"option",8),o()(),i(12,"div",4)(13,"label",9),c(14,"Aula"),o(),i(15,"select",6),M("ngModelChange",function(m){return x(a.programacionAcademica.aulaId,m)||(a.programacionAcademica.aulaId=m),m}),i(16,"option",7),c(17,"Seleccione un aula"),o(),h(18,K,2,2,"option",8),o()(),i(19,"div",4)(20,"label",10),c(21,"Sesi\xF3n Clase IDs (separados por comas)"),o(),i(22,"select",11),M("ngModelChange",function(m){return x(a.programacionAcademica.sesionClaseIds,m)||(a.programacionAcademica.sesionClaseIds=m),m}),h(23,Q,2,4,"option",8),o()(),i(24,"div",4)(25,"label",12),c(26,"Grupo"),o(),i(27,"input",13),M("ngModelChange",function(m){return x(a.programacionAcademica.grupo,m)||(a.programacionAcademica.grupo=m),m}),o()()(),i(28,"div",14)(29,"button",15),g("click",function(){return a.onSave()}),c(30,"Guardar"),o(),i(31,"button",16),g("click",function(){return a.onClose()}),c(32,"Cerrar"),o()(),h(33,R,2,4,"div",17),o()()),t&2&&(s(3),u(a.isEditMode?"Editar Programaci\xF3n Acad\xE9mica":"A\xF1adir Programaci\xF3n Acad\xE9mica"),s(5),A("ngModel",a.programacionAcademica.materiaId),s(),d("ngValue",null),s(2),d("ngForOf",a.materias),s(4),A("ngModel",a.programacionAcademica.aulaId),s(),d("ngValue",null),s(2),d("ngForOf",a.aulas),s(4),A("ngModel",a.programacionAcademica.sesionClaseIds),s(),d("ngForOf",a.sesionesClase),s(4),A("ngModel",a.programacionAcademica.grupo),s(6),d("ngIf",a.toastMessage))},dependencies:[T,S,v,k,j,L,O,B,G,N,W]});let r=l;return r})();function X(r,l){if(r&1){let n=P();i(0,"tr")(1,"td",3),c(2),o(),i(3,"td",3),c(4),o(),i(5,"td",3),c(6),o(),i(7,"td",3),c(8),o(),i(9,"td",3),c(10),o(),i(11,"td",3)(12,"button",9),g("click",function(){let t=f(n).$implicit,a=p();return C(a.editProgramacionAcademica(t.id))}),c(13,"Editar"),o(),i(14,"button",10),g("click",function(){let t=f(n).$implicit,a=p();return C(a.confirmDelete(t.id))}),c(15,"Eliminar"),o()()()}if(r&2){let n=l.$implicit,e=p();s(2),u(n.id),s(2),u(e.getNombreMateria(n.materiaId)),s(2),u(e.getNombreAula(n.aulaId)),s(2),u(e.getFormattedSesionClase(n.sesionClaseIds)),s(2),u(n.grupo)}}function Y(r,l){if(r&1&&(i(0,"div"),c(1),o()),r&2){let n=p();E("mt-4 p-2 rounded ",n.toastClass,""),s(),y(" ",n.toastMessage," ")}}function Z(r,l){if(r&1){let n=P();i(0,"app-programacion-academica-modal",11),g("closeModal",function(){f(n);let t=p();return C(t.handleCloseModal())})("saveProgramacionAcademica",function(t){f(n);let a=p();return C(a.saveProgramacionAcademica(t))}),o()}if(r&2){let n=p();d("programacionAcademica",n.selectedProgramacionAcademica)("isEditMode",n.isEditMode)("materias",n.materias)("aulas",n.aulas)("sesionesClase",n.sesionesClase)}}function ee(r,l){if(r&1){let n=P();i(0,"app-confirm-modal",12),g("confirm",function(){f(n);let t=p();return C(t.deleteProgramacionAcademica())})("cancel",function(){f(n);let t=p();return C(t.cancelDelete())}),o()}r&2&&d("message","\xBFEst\xE1 seguro que desea eliminar esta programaci\xF3n acad\xE9mica?")}var ge=(()=>{let l=class l{constructor(e){this.http=e,this.programacionesAcademicas=[],this.materias=[],this.aulas=[],this.sesionesClase=[],this.selectedProgramacionAcademica={id:0,materiaId:null,aulaId:null,sesionClaseIds:[],grupo:""},this.showModal=!1,this.showConfirmModal=!1,this.isEditMode=!1,this.toastMessage=null,this.toastClass="",this.programacionAcademicaIdToDelete=null}ngOnInit(){this.loadProgramacionesAcademicas(),this.loadMaterias(),this.loadAulas(),this.loadSesionesClase()}loadProgramacionesAcademicas(){this.http.get("http://68.183.146.53/programacionesacademicas/").subscribe(e=>{this.programacionesAcademicas=e},e=>{console.error("Error loading programaciones academicas",e)})}loadMaterias(){this.http.get("http://68.183.146.53/materias/").subscribe(e=>{this.materias=e},e=>{console.error("Error loading materias",e)})}loadAulas(){this.http.get("http://68.183.146.53/aulas/").subscribe(e=>{this.aulas=e},e=>{console.error("Error loading aulas",e)})}loadSesionesClase(){this.http.get("http://68.183.146.53/sesionesclase/").subscribe(e=>{this.sesionesClase=e},e=>{console.error("Error loading sesiones clase",e)})}getNombreMateria(e){let t=this.materias.find(a=>a.id===e);return t?t.nombre:"N/A"}getNombreAula(e){let t=this.aulas.find(a=>a.id===e);return t?t.nombre:"N/A"}getFormattedSesionClase(e){return this.sesionesClase.filter(a=>e.includes(a.id)).map(a=>`${a.diaSemana.slice(0,3).toUpperCase()} ${a.horaInicio}-${a.horaFin}`).join(" ")}editProgramacionAcademica(e){this.selectedProgramacionAcademica=this.programacionesAcademicas.find(t=>t.id===e)||this.selectedProgramacionAcademica,this.isEditMode=!0,this.showModal=!0}addProgramacionAcademica(){this.selectedProgramacionAcademica={id:0,materiaId:null,aulaId:null,sesionClaseIds:[],grupo:""},this.isEditMode=!1,this.showModal=!0}confirmDelete(e){this.programacionAcademicaIdToDelete=e,this.showConfirmModal=!0}deleteProgramacionAcademica(){this.programacionAcademicaIdToDelete!==null&&this.http.delete(`http://68.183.146.53/programacionesacademicas/${this.programacionAcademicaIdToDelete}`).subscribe(()=>{this.showToast("Programaci\xF3n Acad\xE9mica eliminada con \xE9xito","success"),this.loadProgramacionesAcademicas(),this.programacionAcademicaIdToDelete=null,this.showConfirmModal=!1},e=>{this.showToast("Error al eliminar la Programaci\xF3n Acad\xE9mica","error"),console.error("Error deleting programacion academica",e)})}cancelDelete(){this.programacionAcademicaIdToDelete=null,this.showConfirmModal=!1}saveProgramacionAcademica(e){this.isEditMode?this.http.put(`http://68.183.146.53/programacionesacademicas/${e.id}`,e).subscribe(t=>{this.showToast("Programaci\xF3n Acad\xE9mica actualizada con \xE9xito","success"),this.loadProgramacionesAcademicas()},t=>{this.showToast("Error al actualizar la Programaci\xF3n Acad\xE9mica","error"),console.error("Error updating programacion academica",t)}):this.http.post("http://68.183.146.53/programacionesacademicas/",e).subscribe(t=>{this.showToast("Programaci\xF3n Acad\xE9mica creada con \xE9xito","success"),this.loadProgramacionesAcademicas()},t=>{this.showToast("Error al crear la Programaci\xF3n Acad\xE9mica","error"),console.error("Error creating programacion academica",t)}),this.handleCloseModal()}handleCloseModal(){this.showModal=!1}handleCloseConfirmModal(){this.showConfirmModal=!1}showToast(e,t){this.toastMessage=e,this.toastClass=t==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null},2e3)}};l.\u0275fac=function(t){return new(t||l)(w(F))},l.\u0275cmp=b({type:l,selectors:[["app-programacion-academica"]],standalone:!0,features:[I],decls:25,vars:4,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b"],[4,"ngFor","ngForOf"],[1,"bg-green-500","text-white","px-4","py-2","rounded-md","mt-4",3,"click"],[3,"class",4,"ngIf"],[3,"programacionAcademica","isEditMode","materias","aulas","sesionesClase","closeModal","saveProgramacionAcademica",4,"ngIf"],[3,"message","confirm","cancel",4,"ngIf"],[1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],[1,"bg-red-500","text-white","px-3","py-1","rounded-md","ml-2",3,"click"],[3,"closeModal","saveProgramacionAcademica","programacionAcademica","isEditMode","materias","aulas","sesionesClase"],[3,"confirm","cancel","message"]],template:function(t,a){t&1&&(i(0,"div",0)(1,"h1",1),c(2,"Gestionar Programaciones Acad\xE9micas"),o(),i(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),c(7,"ID"),o(),i(8,"th",3),c(9,"Materia"),o(),i(10,"th",3),c(11,"Aula"),o(),i(12,"th",3),c(13,"Sesi\xF3n Clase"),o(),i(14,"th",3),c(15,"Grupo"),o(),i(16,"th",3),c(17,"Acciones"),o()()(),i(18,"tbody"),h(19,X,16,5,"tr",4),o()(),i(20,"button",5),g("click",function(){return a.addProgramacionAcademica()}),c(21,"A\xF1adir Programaci\xF3n Acad\xE9mica"),o(),h(22,Y,2,4,"div",6),o(),h(23,Z,1,5,"app-programacion-academica-modal",7)(24,ee,1,1,"app-confirm-modal",8)),t&2&&(s(19),d("ngForOf",a.programacionesAcademicas),s(3),d("ngIf",a.toastMessage),s(),d("ngIf",a.showModal),s(),d("ngIf",a.showConfirmModal))},dependencies:[T,S,v,k,z,$],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border:1px solid #dee2e6}th[_ngcontent-%COMP%]{background-color:#011d3a;color:#fff}"]});let r=l;return r})();export{ge as ProgramacionAcademicaComponent};
