import{a as z}from"./chunk-MSGFT5JS.js";import{a as F,b as A,e as N,h as O,i as B,k as P,m as D}from"./chunk-OGDTTBTQ.js";import{b as L}from"./chunk-6QFG5ZSD.js";import{Ba as a,Ca as y,Oa as M,Qa as u,Qb as k,Rb as T,Ta as i,Tb as W,Ua as t,Ya as w,Za as h,_a as c,a as S,aa as v,d as j,db as l,eb as f,fb as b,gb as I,ib as x,ja as p,jb as _,ka as m,kb as g,mb as V}from"./chunk-TYC4EHML.js";var E=j(z());function G(r,s){r&1&&(i(0,"span"),l(1,", "),t())}function q(r,s){if(r&1&&(i(0,"span"),l(1),M(2,G,2,0,"span",11),t()),r&2){let n=s.$implicit,o=s.index,e=c().$implicit,d=c();a(),b(" ",d.getEspecialidadNombre(n),""),a(),u("ngIf",o<e.especialidadesIds.length-1)}}function H(r,s){if(r&1){let n=w();i(0,"tr")(1,"td"),l(2),t(),i(3,"td"),l(4),t(),i(5,"td"),l(6),t(),i(7,"td"),l(8),t(),i(9,"td"),l(10),t(),i(11,"td"),l(12),t(),i(13,"td"),l(14),t(),i(15,"td"),M(16,q,3,2,"span",7),t(),i(17,"td")(18,"button",9),h("click",function(){let e=p(n).$implicit,d=c();return m(d.editMedico(e.id))}),l(19," Editar "),t(),i(20,"button",10),h("click",function(){let e=p(n).$implicit,d=c();return m(d.deleteMedico(e.id))}),l(21," Eliminar "),t()()()}if(r&2){let n=s.$implicit;a(2),f(n.id),a(2),I("",n.nombre," ",n.apellido,""),a(2),f(n.ci),a(2),f(n.email),a(2),f(n.telefonoConsultorio),a(2),f(n.numeroLicencia),a(2),f(n.disponibilidad?"Activo":"Inactivo"),a(2),u("ngForOf",n.especialidadesIds)}}function J(r,s){if(r&1){let n=w();i(0,"div",27)(1,"input",28),h("change",function(){let e=p(n).$implicit,d=c(2);return m(d.toggleEspecialidadSelection(e.id))}),t(),l(2),t()}if(r&2){let n=s.$implicit,o=c(2);a(),u("value",n.id)("checked",o.especialidadesIds.includes(n.id)),a(),b(" ",n.nombre," ")}}function K(r,s){if(r&1){let n=w();i(0,"div",12)(1,"div",13)(2,"h2",14),l(3),t(),i(4,"div",15)(5,"div",16)(6,"label",17),l(7,"Nombre"),t(),i(8,"input",18),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.nombre,e)||(d.selectedMedico.nombre=e),m(e)}),t()(),i(9,"div",16)(10,"label",17),l(11,"Apellido"),t(),i(12,"input",18),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.apellido,e)||(d.selectedMedico.apellido=e),m(e)}),t()()(),i(13,"div",15)(14,"div",16)(15,"label",17),l(16,"CI"),t(),i(17,"input",18),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.ci,e)||(d.selectedMedico.ci=e),m(e)}),t()(),i(18,"div",16)(19,"label",17),l(20,"Tel\xE9fono"),t(),i(21,"input",18),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.telefonoConsultorio,e)||(d.selectedMedico.telefonoConsultorio=e),m(e)}),t()()(),i(22,"div",15)(23,"div",16)(24,"label",17),l(25,"Email"),t(),i(26,"input",19),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.email,e)||(d.selectedMedico.email=e),m(e)}),t()(),i(27,"div",16)(28,"label",17),l(29,"N\xFAmero de Licencia"),t(),i(30,"input",18),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.numeroLicencia,e)||(d.selectedMedico.numeroLicencia=e),m(e)}),t()()(),i(31,"div",20)(32,"label",17),l(33,"Disponibilidad"),t(),i(34,"select",18),g("ngModelChange",function(e){p(n);let d=c();return _(d.selectedMedico.disponibilidad,e)||(d.selectedMedico.disponibilidad=e),m(e)}),i(35,"option",21),l(36,"Activo"),t(),i(37,"option",21),l(38,"Inactivo"),t()()(),i(39,"div",20)(40,"label",17),l(41,"Especialidades"),t(),i(42,"div",22),M(43,J,3,3,"div",23),t()(),i(44,"div",24)(45,"button",25),h("click",function(){p(n);let e=c();return m(e.saveMedico())}),l(46),t(),i(47,"button",26),h("click",function(){p(n);let e=c();return m(e.closeModal())}),l(48," Cancelar "),t()()()()}if(r&2){let n=c();a(3),b(" ",n.isEditMode?"Editar M\xE9dico":"A\xF1adir M\xE9dico"," "),a(5),x("ngModel",n.selectedMedico.nombre),a(4),x("ngModel",n.selectedMedico.apellido),a(5),x("ngModel",n.selectedMedico.ci),a(4),x("ngModel",n.selectedMedico.telefonoConsultorio),a(5),x("ngModel",n.selectedMedico.email),a(4),x("ngModel",n.selectedMedico.numeroLicencia),a(4),x("ngModel",n.selectedMedico.disponibilidad),a(),u("ngValue",!0),a(2),u("ngValue",!1),a(6),u("ngForOf",n.especialidades),a(3),b(" ",n.isEditMode?"Actualizar":"Guardar"," ")}}var $=(()=>{let s=class s{constructor(o){this.http=o,this.medicos=[],this.especialidades=[],this.selectedMedico={id:0,ci:"",nombre:"",apellido:"",email:"",especialidadesIds:[],telefonoConsultorio:"",numeroLicencia:"",disponibilidad:!0},this.especialidadesIds=[],this.showModal=!1,this.isEditMode=!1}ngOnInit(){this.loadMedicos(),this.loadEspecialidades()}loadMedicos(){this.http.get("http://143.198.147.110/api/medicos").subscribe(o=>{this.medicos=o},o=>{console.error("Error loading medicos",o)})}loadEspecialidades(){this.http.get("http://143.198.147.110/api/especialidades").subscribe(o=>{this.especialidades=o},o=>{console.error("Error loading especialidades",o)})}getEspecialidadNombre(o){let e=this.especialidades.find(d=>d.id===o);return e?e.nombre:""}addMedico(){this.selectedMedico={id:0,ci:"",nombre:"",apellido:"",email:"",especialidadesIds:[],telefonoConsultorio:"",numeroLicencia:"",disponibilidad:!0},this.especialidadesIds=[],this.isEditMode=!1,this.showModal=!0}editMedico(o){let e=this.medicos.find(d=>d.id===o);e&&(this.selectedMedico=S({},e),this.especialidadesIds=e.especialidadesIds,this.isEditMode=!0,this.showModal=!0)}deleteMedico(o){E.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar"}).then(e=>{e.isConfirmed&&this.http.delete(`http://143.198.147.110/api/medicos/${o}`).subscribe(()=>{E.default.fire("Eliminado","El m\xE9dico ha sido eliminado correctamente.","success"),this.loadMedicos()},d=>{console.error("Error deleting medico",d)})})}saveMedico(){let o={ci:this.selectedMedico.ci,nombre:this.selectedMedico.nombre,apellido:this.selectedMedico.apellido,email:this.selectedMedico.email,telefonoConsultorio:this.selectedMedico.telefonoConsultorio,numeroLicencia:this.selectedMedico.numeroLicencia,disponibilidad:this.selectedMedico.disponibilidad,especialidadesIds:this.especialidadesIds},e=this.isEditMode?`http://143.198.147.110/api/medicos/${this.selectedMedico.id}`:"http://143.198.147.110/api/medicos";(this.isEditMode?this.http.put(e,o):this.http.post(e,o)).subscribe(()=>{E.default.fire("Guardado",`M\xE9dico ${this.isEditMode?"actualizado":"creado"} correctamente.`,"success"),this.loadMedicos(),this.showModal=!1},C=>{console.error("Error saving medico",C)})}toggleEspecialidadSelection(o){let e=this.especialidadesIds.indexOf(o);e===-1?this.especialidadesIds.push(o):this.especialidadesIds.splice(e,1)}closeModal(){this.showModal=!1}};s.\u0275fac=function(e){return new(e||s)(y(L))},s.\u0275cmp=v({type:s,selectors:[["app-medicos"]],standalone:!0,features:[V],decls:30,vars:2,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"flex","justify-center","mb-6"],[2,"background-color","#28a745","color","white","padding","10px 20px","border-radius","8px","font-weight","bold",3,"click"],[1,"min-w-full","bg-white","shadow-lg","rounded-lg"],[2,"background-color","#343a40","color","white"],[2,"padding","12px"],[4,"ngFor","ngForOf"],["style","position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center;",4,"ngIf"],[2,"background-color","#007bff","color","white","padding","6px 12px","border-radius","4px","font-weight","bold","margin-right","4px",3,"click"],[2,"background-color","#dc3545","color","white","padding","6px 12px","border-radius","4px","font-weight","bold",3,"click"],[4,"ngIf"],[2,"position","fixed","top","0","left","0","right","0","bottom","0","background-color","rgba(0, 0, 0, 0.5)","display","flex","align-items","center","justify-content","center"],[2,"background-color","white","padding","24px","border-radius","8px","width","600px","max-width","95%","box-shadow","0px 4px 10px rgba(0, 0, 0, 0.1)"],[2,"font-size","24px","font-weight","bold","margin-bottom","16px","text-align","center"],[2,"display","flex","gap","16px","margin-bottom","16px"],[2,"flex","1"],[1,"block","font-bold","text-gray-700","mb-1"],[1,"w-full","px-3","py-2","border","rounded-lg","focus:outline-none","focus:border-blue-500",3,"ngModelChange","ngModel"],["type","email",1,"w-full","px-3","py-2","border","rounded-lg","focus:outline-none","focus:border-blue-500",3,"ngModelChange","ngModel"],[2,"margin-bottom","16px"],[3,"ngValue"],[2,"display","flex","flex-wrap","wrap","gap","16px"],["style","flex: 1 1 45%;",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-between","margin-top","16px"],[2,"background-color","#007bff","color","white","padding","10px 16px","border-radius","4px","font-weight","bold","width","45%",3,"click"],[2,"background-color","#6c757d","color","white","padding","10px 16px","border-radius","4px","font-weight","bold","width","45%",3,"click"],[2,"flex","1 1 45%"],["type","checkbox",3,"change","value","checked"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"h1",1),l(2,"Gestionar M\xE9dicos"),t(),i(3,"div",2)(4,"button",3),h("click",function(){return d.addMedico()}),l(5," A\xF1adir M\xE9dico "),t()(),i(6,"table",4)(7,"thead")(8,"tr",5)(9,"th",6),l(10,"ID"),t(),i(11,"th",6),l(12,"Nombre y Apellido"),t(),i(13,"th",6),l(14,"CI"),t(),i(15,"th",6),l(16,"Email"),t(),i(17,"th",6),l(18,"Tel\xE9fono"),t(),i(19,"th",6),l(20,"Licencia"),t(),i(21,"th",6),l(22,"Disponibilidad"),t(),i(23,"th",6),l(24,"Especialidades"),t(),i(25,"th",6),l(26,"Acciones"),t()()(),i(27,"tbody"),M(28,H,22,9,"tr",7),t()(),M(29,K,49,12,"div",8),t()),e&2&&(a(28),u("ngForOf",d.medicos),a(),u("ngIf",d.showModal))},dependencies:[W,k,T,D,B,P,F,O,A,N]});let r=s;return r})();export{$ as MedicosComponent};
